name = "kids-med-tracker"
main = "worker/index.ts"
compatibility_date = "2026-01-11"

assets = { directory = "./dist", binding = "ASSETS" }

[[d1_databases]]
binding = "DB"
database_name = "kids-med-prod"
database_id = "REPLACE_WITH_PROD_DATABASE_ID"
migrations_dir = "worker/db/migrations"

[vars]
ACCESS_AUD = "REPLACE_WITH_ACCESS_AUD"
ACCESS_ISS = "https://REPLACE_WITH_YOUR_TEAM.cloudflareaccess.com"
TURNSTILE_SITE_KEY = "REPLACE_WITH_TURNSTILE_SITE_KEY"
ENV = "production"

[env.preview]
ENV = "preview"

[[env.preview.d1_databases]]
binding = "DB"
database_name = "kids-med-preview"
database_id = "REPLACE_WITH_PREVIEW_DATABASE_ID"
migrations_dir = "worker/db/migrations"
