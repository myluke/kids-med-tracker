# Repository Guidelines

## Project Structure & Module Organization

- `src/` — Vue 3 frontend (`main.js`, `App.vue`)
  - `src/views/` — route pages (e.g. `HomeView.vue`, `StatsView.vue`)
  - `src/components/` — reusable UI components (e.g. `MedPanel.vue`)
  - `src/stores/` — Pinia state (e.g. `records.js`)
  - `src/i18n/` — localization files and setup (`zh-CN.json`, `en-US.json`)
- `worker/` — Cloudflare Worker backend (Hono routes in `worker/routes/`, D1 SQL migrations in `worker/db/migrations/`)
- `public/` — static assets served as-is (PWA icons under `public/icons/`)
- `docs/` — design/implementation notes
- Build output: `dist/` (generated by `pnpm build`)

## Build, Test, and Development Commands

- `pnpm install` — install dependencies (Node.js >= 18; pnpm preferred)
- `pnpm dev` — run the Vite dev server (default: http://localhost:5173)
- `pnpm build` — production build to `dist/`
- `pnpm preview` — serve the built app locally
- `pnpm lint` — run ESLint (auto-fixes where possible)
- `pnpm worker:dev` — run the Worker locally via Wrangler (default port: `8787`)
- `pnpm worker:deploy` — deploy the Worker to Cloudflare

## Coding Style & Naming Conventions

- ESLint is configured in `eslint.config.js` and enforces: 2-space indentation, single quotes, and no semicolons.
- Vue files: components use `PascalCase.vue`; pages use `*View.vue`.
- Worker code: keep routes in `worker/routes/*.ts` and shared utilities in `worker/utils/`.
- UI text must be i18n-backed: add keys to `src/i18n/*.json` instead of hard-coding strings.

## Testing Guidelines

- No automated test runner is configured yet. Before opening a PR, run `pnpm lint` and `pnpm build`, and do a quick smoke test with `pnpm dev`.
- If you introduce tests, add a `pnpm test` script and use a consistent naming pattern like `tests/**/*.test.{js,ts}`.

## Commit & Pull Request Guidelines

- Use Conventional Commits (history uses `feat:` and `fix:`). Keep the subject short and imperative (Chinese or English is fine).
- PRs should include: what/why summary, manual test steps, and screenshots/GIFs for UI changes. For backend changes, document any new endpoints and D1 migration impacts.

## Security & Configuration Tips

- Treat health data as sensitive: avoid telemetry/third-party uploads by default.
- Do not commit secrets. Prefer `wrangler secret put` and local env files (e.g. `.env.local`, `.dev.vars`) for environment-specific values.
